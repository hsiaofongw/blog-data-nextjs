<html lang="en"><head><meta charset="utf-8">
<meta charset="UTF-8"><meta name="generator" content="Hugo 0.58.2"><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<meta name="color-scheme" content="light">
<meta name="supported-color-schemes" content="light">
<meta name="keywords" content="think,explore,learn,notes">
<meta name="theme-color" content="#FDF6E3">
<meta name="robots" content="all">


    <meta name="description" content="在开始讲解之前 在开始讲解之前先请大家看一个视频，以便对crontab有一个基本的概念. 看完这个视频相信一部分读者已经得到了收获，也可以继续看我慢慢讲解吧. 什么是crontab以及c">
<title>Linux中的crontab命令的简单介绍及其用法</title><link rel="stylesheet" href="/css/core.min.1d787f80456e2393db9a320bbe3ea1e8962ee8aebfc79c1b17cb4309637fe92baa5d9028b3d2f17e98a84c7d9b717cbc.css" integrity="sha384-HXh/gEVuI5PbmjILvj6h6JYu6K6/x5wbF8tDCWN/6SuqXZAos9LxfpioTH2bcXy8">

<link rel="shortcut icon" type="image/png" href="/favicon.png"><script defer="" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-AMS-MML_HTMLorMML" integrity="sha384-e/4/LvThKH1gwzXhdbY2AsjR3rm7LHWyhIG5C0jiRfn8AN2eTN5ILeztWw0H9jmN" crossorigin="anonymous"></script>
        <script type="text/x-mathjax-config;executed=true" defer="">MathJax.Hub.Config({ tex2jax: { inlineMath: [['$','$'], ['\\(','\\)']] } });</script><link rel="alternate" type="application/atom+xml" title="探索子" href="/posts/index.xml"><script>
    let selector = '#cards-grid-container';
    window.addEventListener('load', event => {
        console.log('hello');

        var ul = document.querySelector(selector);
        for (var i = ul.children.length; i >= 0; i--) {
            ul.appendChild(ul.children[Math.random() * i | 0]);
        };
    });
</script>


<script async="" defer="" data-domain="beyondstars.xyz" src="https://plausible.io/js/plausible.js"></script>
<style type="text/css">.MathJax_Hover_Frame {border-radius: .25em; -webkit-border-radius: .25em; -moz-border-radius: .25em; -khtml-border-radius: .25em; box-shadow: 0px 0px 15px #83A; -webkit-box-shadow: 0px 0px 15px #83A; -moz-box-shadow: 0px 0px 15px #83A; -khtml-box-shadow: 0px 0px 15px #83A; border: 1px solid #A6D ! important; display: inline-block; position: absolute}
.MathJax_Menu_Button .MathJax_Hover_Arrow {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 4px; -webkit-border-radius: 4px; -moz-border-radius: 4px; -khtml-border-radius: 4px; font-family: 'Courier New',Courier; font-size: 9px; color: #F0F0F0}
.MathJax_Menu_Button .MathJax_Hover_Arrow span {display: block; background-color: #AAA; border: 1px solid; border-radius: 3px; line-height: 0; padding: 4px}
.MathJax_Hover_Arrow:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_Hover_Arrow:hover span {background-color: #CCC!important}
</style><style type="text/css">#MathJax_About {position: fixed; left: 50%; width: auto; text-align: center; border: 3px outset; padding: 1em 2em; background-color: #DDDDDD; color: black; cursor: default; font-family: message-box; font-size: 120%; font-style: normal; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 15px; -webkit-border-radius: 15px; -moz-border-radius: 15px; -khtml-border-radius: 15px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_About.MathJax_MousePost {outline: none}
.MathJax_Menu {position: absolute; background-color: white; color: black; width: auto; padding: 5px 0px; border: 1px solid #CCCCCC; margin: 0; cursor: default; font: menu; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 5px; -webkit-border-radius: 5px; -moz-border-radius: 5px; -khtml-border-radius: 5px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_MenuItem {padding: 1px 2em; background: transparent}
.MathJax_MenuArrow {position: absolute; right: .5em; padding-top: .25em; color: #666666; font-size: .75em}
.MathJax_MenuActive .MathJax_MenuArrow {color: white}
.MathJax_MenuArrow.RTL {left: .5em; right: auto}
.MathJax_MenuCheck {position: absolute; left: .7em}
.MathJax_MenuCheck.RTL {right: .7em; left: auto}
.MathJax_MenuRadioCheck {position: absolute; left: .7em}
.MathJax_MenuRadioCheck.RTL {right: .7em; left: auto}
.MathJax_MenuLabel {padding: 1px 2em 3px 1.33em; font-style: italic}
.MathJax_MenuRule {border-top: 1px solid #DDDDDD; margin: 4px 3px}
.MathJax_MenuDisabled {color: GrayText}
.MathJax_MenuActive {background-color: #606872; color: white}
.MathJax_MenuDisabled:focus, .MathJax_MenuLabel:focus {background-color: #E8E8E8}
.MathJax_ContextMenu:focus {outline: none}
.MathJax_ContextMenu .MathJax_MenuItem:focus {outline: none}
#MathJax_AboutClose {top: .2em; right: .2em}
.MathJax_Menu .MathJax_MenuClose {top: -10px; left: -10px}
.MathJax_MenuClose {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; font-family: 'Courier New',Courier; font-size: 24px; color: #F0F0F0}
.MathJax_MenuClose span {display: block; background-color: #AAA; border: 1.5px solid; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; line-height: 0; padding: 8px 0 6px}
.MathJax_MenuClose:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_MenuClose:hover span {background-color: #CCC!important}
.MathJax_MenuClose:hover:focus {outline: none}
</style><style type="text/css">.MathJax_Preview .MJXf-math {color: inherit!important}
</style><style type="text/css">.MJX_Assistive_MathML {position: absolute!important; top: 0; left: 0; clip: rect(1px, 1px, 1px, 1px); padding: 1px 0 0 0!important; border: 0!important; height: 1px!important; width: 1px!important; overflow: hidden!important; display: block!important; -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none}
.MJX_Assistive_MathML.MJX_Assistive_MathML_Block {width: 100%!important}
</style><style type="text/css">#MathJax_Zoom {position: absolute; background-color: #F0F0F0; overflow: auto; display: block; z-index: 301; padding: .5em; border: 1px solid black; margin: 0; font-weight: normal; font-style: normal; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; -webkit-box-sizing: content-box; -moz-box-sizing: content-box; box-sizing: content-box; box-shadow: 5px 5px 15px #AAAAAA; -webkit-box-shadow: 5px 5px 15px #AAAAAA; -moz-box-shadow: 5px 5px 15px #AAAAAA; -khtml-box-shadow: 5px 5px 15px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_ZoomOverlay {position: absolute; left: 0; top: 0; z-index: 300; display: inline-block; width: 100%; height: 100%; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
#MathJax_ZoomFrame {position: relative; display: inline-block; height: 0; width: 0}
#MathJax_ZoomEventTrap {position: absolute; left: 0; top: 0; z-index: 302; display: inline-block; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
</style><style type="text/css">.MathJax_Preview {color: #888}
#MathJax_Message {position: fixed; left: 1em; bottom: 1.5em; background-color: #E6E6E6; border: 1px solid #959595; margin: 0px; padding: 2px 8px; z-index: 102; color: black; font-size: 80%; width: auto; white-space: nowrap}
#MathJax_MSIE_Frame {position: absolute; top: 0; left: 0; width: 0px; z-index: 101; border: 0px; margin: 0px; padding: 0px}
.MathJax_Error {color: #CC0000; font-style: italic}
</style><style type="text/css">.MJXp-script {font-size: .8em}
.MJXp-right {-webkit-transform-origin: right; -moz-transform-origin: right; -ms-transform-origin: right; -o-transform-origin: right; transform-origin: right}
.MJXp-bold {font-weight: bold}
.MJXp-italic {font-style: italic}
.MJXp-scr {font-family: MathJax_Script,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-frak {font-family: MathJax_Fraktur,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-sf {font-family: MathJax_SansSerif,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-cal {font-family: MathJax_Caligraphic,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-mono {font-family: MathJax_Typewriter,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-largeop {font-size: 150%}
.MJXp-largeop.MJXp-int {vertical-align: -.2em}
.MJXp-math {display: inline-block; line-height: 1.2; text-indent: 0; font-family: 'Times New Roman',Times,STIXGeneral,serif; white-space: nowrap; border-collapse: collapse}
.MJXp-display {display: block; text-align: center; margin: 1em 0}
.MJXp-math span {display: inline-block}
.MJXp-box {display: block!important; text-align: center}
.MJXp-box:after {content: " "}
.MJXp-rule {display: block!important; margin-top: .1em}
.MJXp-char {display: block!important}
.MJXp-mo {margin: 0 .15em}
.MJXp-mfrac {margin: 0 .125em; vertical-align: .25em}
.MJXp-denom {display: inline-table!important; width: 100%}
.MJXp-denom > * {display: table-row!important}
.MJXp-surd {vertical-align: top}
.MJXp-surd > * {display: block!important}
.MJXp-script-box > *  {display: table!important; height: 50%}
.MJXp-script-box > * > * {display: table-cell!important; vertical-align: top}
.MJXp-script-box > *:last-child > * {vertical-align: bottom}
.MJXp-script-box > * > * > * {display: block!important}
.MJXp-mphantom {visibility: hidden}
.MJXp-munderover, .MJXp-munder {display: inline-table!important}
.MJXp-over {display: inline-block!important; text-align: center}
.MJXp-over > * {display: block!important}
.MJXp-munderover > *, .MJXp-munder > * {display: table-row!important}
.MJXp-mtable {vertical-align: .25em; margin: 0 .125em}
.MJXp-mtable > * {display: inline-table!important; vertical-align: middle}
.MJXp-mtr {display: table-row!important}
.MJXp-mtd {display: table-cell!important; text-align: center; padding: .5em 0 0 .5em}
.MJXp-mtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-mlabeledtr {display: table-row!important}
.MJXp-mlabeledtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mlabeledtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-merror {background-color: #FFFF88; color: #CC0000; border: 1px solid #CC0000; padding: 1px 3px; font-style: normal; font-size: 90%}
.MJXp-scale0 {-webkit-transform: scaleX(.0); -moz-transform: scaleX(.0); -ms-transform: scaleX(.0); -o-transform: scaleX(.0); transform: scaleX(.0)}
.MJXp-scale1 {-webkit-transform: scaleX(.1); -moz-transform: scaleX(.1); -ms-transform: scaleX(.1); -o-transform: scaleX(.1); transform: scaleX(.1)}
.MJXp-scale2 {-webkit-transform: scaleX(.2); -moz-transform: scaleX(.2); -ms-transform: scaleX(.2); -o-transform: scaleX(.2); transform: scaleX(.2)}
.MJXp-scale3 {-webkit-transform: scaleX(.3); -moz-transform: scaleX(.3); -ms-transform: scaleX(.3); -o-transform: scaleX(.3); transform: scaleX(.3)}
.MJXp-scale4 {-webkit-transform: scaleX(.4); -moz-transform: scaleX(.4); -ms-transform: scaleX(.4); -o-transform: scaleX(.4); transform: scaleX(.4)}
.MJXp-scale5 {-webkit-transform: scaleX(.5); -moz-transform: scaleX(.5); -ms-transform: scaleX(.5); -o-transform: scaleX(.5); transform: scaleX(.5)}
.MJXp-scale6 {-webkit-transform: scaleX(.6); -moz-transform: scaleX(.6); -ms-transform: scaleX(.6); -o-transform: scaleX(.6); transform: scaleX(.6)}
.MJXp-scale7 {-webkit-transform: scaleX(.7); -moz-transform: scaleX(.7); -ms-transform: scaleX(.7); -o-transform: scaleX(.7); transform: scaleX(.7)}
.MJXp-scale8 {-webkit-transform: scaleX(.8); -moz-transform: scaleX(.8); -ms-transform: scaleX(.8); -o-transform: scaleX(.8); transform: scaleX(.8)}
.MJXp-scale9 {-webkit-transform: scaleX(.9); -moz-transform: scaleX(.9); -ms-transform: scaleX(.9); -o-transform: scaleX(.9); transform: scaleX(.9)}
.MathJax_PHTML .noError {vertical-align: ; font-size: 90%; text-align: left; color: black; padding: 1px 3px; border: 1px solid}
</style></head><body><div id="MathJax_Message" style="display: none;"></div>
    <div class="base-body"><section id="header" class="site header">
    <div class="header wrap"><span class="header left-side"><a class="site home" href="/"><img class="site logo" src="/favicon.png" alt=""><span class="site name">探索子</span></a></span>
        <span class="header right-side"><div class="nav wrap"><nav class="nav">
    
        <a class="nav item" href="https://exploro.one">前往新站</a>
    
</nav></div></span></div></section>
<div id="content"><div class="article-container"><section class="article header">
    <h1 class="article title">Linux中的crontab命令的简单介绍及其用法</h1><p class="article date">2020-03-16</p></section><article class="article markdown-body">

<h2 id="在开始讲解之前">在开始讲解之前</h2>

<p>在开始讲解之前先请大家看一个视频，以便对crontab有一个基本的概念.</p>


<div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
  <iframe src="https://www.youtube.com/embed/QZJ1drMQz1A" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen="" title="YouTube Video"></iframe>
</div>


<p>看完这个视频相信一部分读者已经得到了收获，也可以继续看我慢慢讲解吧.</p>

<h2 id="什么是crontab以及crontab能做什么">什么是crontab以及crontab能做什么</h2>

<p>crontab呢其实就是Linux操作系统中用来设置定时任务的一个工具，通过crontab我们可以在Linux操作系统中设置定时任务，也就是可以使得特定的任务在特定的时间得以执行，而且是周期式的，比如说，通过crontab可以设定每天的凌晨2点进行服务器的缓存更新和备份，毕竟这个时候网站的访客也比较少，所以不会有什么影响，可以设置crontab每天晚上9点整自动地将当天网站服务器的访问记录<code>access.log</code>发送到指定的地方供分析和审计，或者设置在每周的周几的多少点多少分，清理一次临时文件目录<code>/tmp/*</code>，这些通过crontab来实现，可以说都是非常方便的.</p>

<h2 id="要怎么做">要怎么做</h2>

<p>要开始学习crontab的用法可以首先运行</p>

<pre><code>man crontab
</code></pre>

<p>打开crontab的文档页面，这是比较全的文档所以可以不用一下子全看完，首先说的是</p>

<p><q>
maintain crontab files for individual users
</q></p>

<p>也就说crontab是可以分别维护每一个用户设定的定时任务计划的，各个用户的工作安排是互不干扰的，比较Linux是学习Unix的，而Unix是一个多用户操作系统，然后有两个命令</p>

<pre><code>crontab -u &lt;用户名&gt; -l # 需要sudo权限
crontab -l # 如果权限不够
</code></pre>

<p>和</p>

<pre><code>crontab -e
</code></pre>

<p>其中<code>-u</code>选项加参数指定的是具体的用户名，这很好理解因为每个用户都有自己单独的一份<code>crontab</code>设置，然后<code>-l</code>就是<code>list</code>的意思，就是列出给定用户(如果有<code>-u</code>选项)或者当前用户(没有<code>-u</code>选项)的<code>crontab</code>设置.所谓<code>crontab</code>设置的内容无非就是在什么时候执行什么任务，就这么简单，只不过这个时间周期的表达式可以非常的简洁和灵活，我们稍后会介绍.</p>

<p>然后<code>-e</code>选项其实就是编辑(edit)当前用户的<code>crontab</code>设置的意思啦，很简单.</p>

<h2 id="编辑自己的crontable">编辑自己的crontable</h2>

<p>运行</p>

<pre><code>crontab -e
</code></pre>

<p>命令（不需要加任何参数）会进入当前用户的crontable（日程表）编辑界面，建议在这之前将<code>EDITOR</code>环境变量设置成自己熟悉的文本编辑器，比如说</p>

<pre><code>export EDITOR=`which vim` # 设置使用vim来打开crontable
export EDITOR=`which nano` # 设置使用nano来打开crontable
export EDITOR=`which emacs` # 设置使用emacs来打开crontable
</code></pre>

<p>推荐还是使用<code>vim</code>来编辑，<code>vim</code>很容易学．尽量不要自己编辑crontab的配置文件，除非是在写自动化地脚本程序.</p>

<p><code>crontab -e</code>首先会创建一个临时文件<code>/tmp/crontab.xxxxxxx</code>来供你编辑crontable.</p>

<h3 id="crontab的格式">crontab的格式</h3>

<p>在自己真的开始编辑crontab之前呢，可以运行</p>

<pre><code>man 5 crontab # 中间的数字5不能少，man 5是语法手册的意思
</code></pre>

<p>来查看<code>crontab</code>的语法和范例，一般来说是这样的</p>

<pre><code>* * * * * command
</code></pre>

<p>有5个位置被空格分隔开来，然后最右边的是要执行的命令，命令和前面的位置也是空格分隔开来，前面这5个位置其实就是用来设置时间的，怎么说呢？请看下面的示意图</p>



<style>
    .mediumText {
        font-size: 24px;
        fill: gray;
    }

</style>
<svg class="demo-svg" width="600" height="300">

<text x="60" y="80" class="mediumText">*</text>
<text x="90" y="80" class="mediumText">*</text>
<text x="120" y="80" class="mediumText">*</text>
<text x="150" y="80" class="mediumText">*</text>
<text x="180" y="80" class="mediumText">*</text>
<text x="210" y="72" fill="gray">command_to_run</text>

<polyline points="65 80, 65 250, 200 250" fill="none" stroke="gray" stroke-width="2"></polyline>

<polyline points="95 80, 95 220, 200 220" fill="none" stroke="gray" stroke-width="2"></polyline>

<polyline points="125 80, 125 190, 200 190" fill="none" stroke="gray" stroke-width="2"></polyline>

<polyline points="155 80, 155 160, 200 160" fill="none" stroke="gray" stroke-width="2"></polyline>

<polyline points="185 80, 185 130, 200 130" fill="none" stroke="gray" stroke-width="2"></polyline>

<text x="210" y="130" fill="gray">一周的周几，范围0到6</text>
<text x="210" y="160" fill="gray">一年的哪月，范围1到12</text>
<text x="210" y="190" fill="gray">一个月的第几天，范围1到31</text>
<text x="210" y="220" fill="gray">一天的第几个小时，范围0到23</text>
<text x="210" y="250" fill="gray">一个小时的第几分钟，范围0到59</text>

</svg>


<p>有几点可能需要单独地说明一下，这五个描述时间的位置呢其实也是可以取星号*的，含义待会我会说，然后第五个位置，取0代表周天，取7也可以代表周天，1到6就是周一到周六，第四个位置1到12代表每一年的第1个月到第12个月，第三个位置呢，就是一个月的第一天，第二个位置取0代表凌晨12点，也就是24小时制的小时，第一个位置也是24小时制的分钟了，取0代表整点.</p>

<p>由上面这张示意图我们可以看到，crontab的记录是一行一行的，示意图里面给出的是其中的一行，一行记录（一条记录）有五个位置用于描述时间，一个单独的位置用于描述命令，这总共六个位置由空白符（制表符或者空格）分隔开，总体上看，一条crontab记录大致是符合以下这样的模式：</p>

<pre><code>t1  t2  t3  t4  t5  s
</code></pre>

<p>其中t1到t5的相对位置和示意图当中的是一样的，s就代表要执行的命．要明白crontab记录的语法，如果成功地从解释器的角度来理解，那会清晰很多.</p>

<p>那么，假设现在crontab的解析程序读取到了</p>

<pre><code>t1  t2  t3  t4  t5 s
</code></pre>

<p>这条记录，它要如何处理呢？</p>

<p>首先，当然解释器是可以有很多种解析crontab记录的方式的，我们下面演示其中比较好理解的一种，也是比较简单的一种，首先这个，简单crontab记录解释器（一下简称解释器）可以从右到左地扫描这么一条crontab记录.</p>

<pre><code>t1  t2  t3  t4  t5  s
                    ^
</code></pre>

<p>解释器最先读到s，现在它知道了，要执行的命令是s（不是字面意义上的s，这里s是个符号，我们用它指代具体的命令，比如说s可以是”echo hello”这样的命令），那么仅仅知道要执行的是s还是不能完全定义一条crontab记录：要什么时候指向s呢？继续向做扫描吧，crontab解释器这样想.</p>

<pre><code>t1  t2  t3  t4  t5  s
                ^
</code></pre>

<p>现在解释器的字符扫描指针刚扫描完了t5，如果t5是星号*，那么解释器就指定了，哦，原来一周的每一天，都要执行s啊，如果t5不是星号*，而是一个具体的数字，那么解释器就会看做是在具体的每周的星期几来执行s，可是，对于这两种情况来说，仅仅知道要在一周的周几执行或者说一周的每一天都执行，还是不确定啊，要执行s的那天，具体又是什么时候执行呢？带着疑问，解释器啊又继续往左边扫描，期待以此来接近答案.</p>

<pre><code>t1  t2  t3  t4  t5  s
            ^
</code></pre>

<p>t4呢就是指一年的哪个月执行s，一年有12个月，所以t4的取值范围或者是星号*，表示一年的每个月都执行，或者是具体的数字（或者数字和符号组合），表示具体的某个月，或者其他规则.因为知道一年的哪个月来执行s还是不够的，所以又继续往左扫描：</p>

<pre><code>t1  t2  t3  t4  t5  s
        ^
</code></pre>

<p>t3的意思是每个月的第多少天执行s，因为每个月最多有31天，所以t3可以取星号*或者1到31或者是1到31和符号的组合来描述一个月到底第几天或者哪些天来执行s，同样地，知道一个月的哪几天或者哪天执行s还是有很多不确定，继续往左扫描：</p>

<pre><code>t1  t2  t3  t4  t5  s
    ^
</code></pre>

<p>t2的意思是每天的多少时或者在第几个和第几个小时执行s，0代表凌晨12点，其他数字1到23对应1到23点，也就是凌晨1点一直到晚上11点，是的，知道了在哪个小时来执行s还是不确定，继续：</p>

<pre><code>t1  t2  t3  t4  t5  s
^
</code></pre>

<p>到这个时候，我相信，不管是我们讨论的这个简单crontab解释器，还是屏幕前的你，都已经知道，并且确定，将会在什么时候执行s．t1的意思是在每个小时的多少分钟和第几分钟执行s.</p>

<h3 id="具体的案例">具体的案例</h3>

<p>现在运行</p>

<pre><code>man 5 crontab
</code></pre>

<p>打开crontab的语法介绍页面，按Control+D翻到文末的案例介绍，如图所示</p>

<p><img src="/crontab-examples.png" alt="Crontab Examples"></p>

<p>现在我们尝试用刚才简单crontab解释器的解释方法来解释其中的每一个例子：</p>

<p>第一个是</p>

<pre><code>5 0 * * * $HOME/bin/daily.job &gt;&gt; $HOME/tmp/out 2&gt;&amp;1
</code></pre>

<p>命令太长可以不看，但是我们知道时间设定是</p>

<pre><code>5 0 * * *
</code></pre>

<p>首先（看箭头）</p>

<pre><code>5 0 * * *
        ^
</code></pre>

<p>表示在每周的每一天都执行，然后（一直看着箭头所指位置）</p>

<pre><code>5 0 * * *
      ^
</code></pre>

<p>表示在每一年的每一个月都执行，那每个月的哪天执行呢？</p>

<pre><code>5 0 * * *
    ^
</code></pre>

<p>每个月的每一天都执行，每一天的哪个小时执行呢？</p>

<pre><code>5 0 * * *
  ^
</code></pre>

<p>每一条的凌晨12点执行，凌晨12点的第几分钟执行呢？</p>

<pre><code>5 0 * * *
^
</code></pre>

<p>凌晨12点的第5分钟执行，秒级的精度在crontab中暂时无法设置的，所以确定到第几分钟，就可以认为这一条crontab记录的时间设置已经确定了.</p>

<p>也就是说</p>

<pre><code>5 0 * * *
</code></pre>

<p>表示要在每年的每个月的每天的00:05执行给定的命令.</p>

<p>这个太简单了，我们看一个难一点的</p>

<pre><code>0  22  *  *  1-5
             ^
</code></pre>

<p>这里出现了一个新的符号，1-5也就是表示1,2,3,4,5，那么结合所处的位置来看呢，很简单，就是每年的1月到5月这5个月都要执行，这五个月的什么时候呢？</p>

<pre><code>0  22  *  *  1-5
          ^
</code></pre>

<p>在这5个月中，每周的每一天都执行，还不够具体</p>

<pre><code>0  22  *  *  1-5
       ^
</code></pre>

<p>在这5个月中，每个月的每一天，不管这个月有多少条，都执行，哪一天的什么时候执行呢？</p>

<pre><code>0  22  *  *  1-5
^
</code></pre>

<p>每天的22:00执行.</p>

<p>现在综合一下：每年的第1个月到第5个月这5个月，的每周的每一天，并且每月的每一天的，的22:00执行相应的命令.</p>

<p>最后一个例子，我也写累了，就快写完了</p>

<pre><code>23  0-23/2  *  *  * 
</code></pre>

<p>最右边的大家都懂了，现在只要理解每一天的什么时候执行就可以了</p>

<pre><code>23  0-23/2  *  *  * 
    ^
</code></pre>

<p>0-23代表0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23这些个小时，/2表示间隔的意思，间隔2个小时，什么意思呢？从0时开始，0加2等于2，也就是下一次是在第2小时，以此类推，也就是0,2,4,6,8,10,12,14,16,18,20,22这些个小时执行，并且</p>

<pre><code>23  0-23/2  *  *  * 
^
</code></pre>

<p>在这些个小时的23分执行，也就是，在每一年的每一月的每一天的</p>

<p>00:23, 02:23, 04:23, 06:23, 08:23, 10:23, 12:23, 14:23, 16:23, 18:23, 20:23 和 22:23 执行相应的命令.</p>

<p>至此，希望您已经知道如何在crontab中按照自己的意愿设定crontab记录了.</p>

<h2 id="总结">总结</h2>

<p>在这篇文章中，我们介绍了Linux中的定时任务功能，具体是通过crontab命令来设置，我们知道crontab能针对每一个用户单独地设置和保存定时任务，我们最后讲解了crontab记录的语法：先是从解释器的角度理解，最后结合实际案例加深理解.</p>

<p>感谢花时间阅读到这来.</p>

<h2 id="参考文献">参考文献</h2>

<p>[1] <a href="https://www.youtube.com/watch?v=QZJ1drMQz1A">(37) Linux/Mac Tutorial: Cron Jobs - How to Schedule Commands with crontab - YouTube</a></p>

<p>[2] <a href="https://crontab.guru/">crontab.guru - the cron schedule expression editor</a></p>
</article><section class="article labels"><a class="category" href="/categories/%E6%8A%80%E6%9C%AF%E4%BA%A4%E6%B5%81/">技术交流</a><a class="tag" href="/tags/linux/">linux</a><a class="tag" href="/tags/crontab/">crontab</a></section></div><section class="article navigation"><p><a class="link" href="/posts/correct-time-in-cloudcone-vps/"><span class="li">←</span>修复CloudCone VPS无法自动同步时间的问题</a></p><p><a class="link" href="/posts/hugo-shortcode-svg/"><span class="li">→</span>使用Hugo Shortcode和svg标签构建自定义图形！</a></p></section></div><section id="footer" class="footer">
</section>
</div>


</body></html>